[gd_scene load_steps=15 format=3 uid="uid://bf4ytfd2qojaq"]

[ext_resource type="Script" path="res://Scripts/game.gd" id="1_h0t6p"]
[ext_resource type="PackedScene" uid="uid://cjkpk06h3i6m2" path="res://Scenes/house.tscn" id="2_3ic8r"]
[ext_resource type="PackedScene" uid="uid://cicfopi26jdj" path="res://Scenes/player.tscn" id="3_owglr"]
[ext_resource type="PackedScene" uid="uid://d04408vvn85lb" path="res://Scenes/mannequin.tscn" id="4_p70qw"]
[ext_resource type="Shader" path="res://Scripts/Shaders/distortion.gdshader" id="5_flpld"]
[ext_resource type="PackedScene" uid="uid://cjf1d6fsmpbq" path="res://Scenes/power_generator.tscn" id="6_5bt1q"]
[ext_resource type="Texture2D" uid="uid://xpwtesvn0ck0" path="res://2D Sprites/gameplay switch to machine button.png" id="7_5ay0h"]
[ext_resource type="Shader" path="res://Scripts/Shaders/blur_shader.gdshader" id="8_mmtmb"]
[ext_resource type="Texture2D" uid="uid://dojrt2id5umyl" path="res://2D Sprites/Player & Items Sprites/Power Generator Panel Green Animation.png" id="9_0hw32"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_hayf1"]
shader = ExtResource("5_flpld")
shader_parameter/yaxis = null
shader_parameter/fov = Vector2(0.25, 0.33)
shader_parameter/stretch = Vector2(41, 28)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_815rs"]
shader = ExtResource("8_mmtmb")
shader_parameter/lod = 2.5

[sub_resource type="Animation" id="Animation_tlbm4"]
resource_name = "Power Generator Lift"
length = 0.8
step = 0.1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Power Generator Sprites:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(0.5),
"update": 0,
"values": [Vector2(0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Power Generator Sprites:frame_coords")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.6, 0.8),
"transitions": PackedFloat32Array(0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5),
"update": 1,
"values": [Vector2i(2, 1), Vector2i(2, 1), Vector2i(1, 1), Vector2i(0, 1), Vector2i(2, 0), Vector2i(1, 0), Vector2i(0, 0)]
}

[sub_resource type="Animation" id="Animation_ebd88"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Power Generator Sprites:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Power Generator Sprites:frame_coords")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Vector2i(2, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_o1oaj"]
_data = {
"Power Generator Lift": SubResource("Animation_tlbm4"),
"RESET": SubResource("Animation_ebd88")
}

[node name="Game" type="Node2D" node_paths=PackedStringArray("generator_button")]
script = ExtResource("1_h0t6p")
generator_button = NodePath("Power Generator Container/GeneratorTextureButton")

[node name="House" parent="." instance=ExtResource("2_3ic8r")]

[node name="Player" parent="." node_paths=PackedStringArray("mannequin_enemy") instance=ExtResource("3_owglr")]
mannequin_enemy = NodePath("../Mannequin")

[node name="Mannequin" parent="." node_paths=PackedStringArray("marker_points", "house") instance=ExtResource("4_p70qw")]
position = Vector2(256, 0)
health_value = 50
agression_level = 100
attack_frequency = 3
chance_to_mask = 100
marker_points = [NodePath("../House/Point 0"), NodePath("../House/Point 1"), NodePath("../House/Point 2"), NodePath("../House/Point 3"), NodePath("../House/Point 4")]
house = NodePath("../House")

[node name="Distortion" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_hayf1")
offset_left = -150.0
offset_top = -110.0
offset_right = 150.0
offset_bottom = 110.0

[node name="Power Generator Container" type="Node2D" parent="."]

[node name="Power Generator" parent="Power Generator Container" instance=ExtResource("6_5bt1q")]

[node name="GeneratorTextureButton" type="TextureButton" parent="Power Generator Container"]
offset_left = -95.0
offset_top = 72.0
offset_right = 95.0
offset_bottom = 90.0
texture_normal = ExtResource("7_5ay0h")

[node name="ColorRect" type="ColorRect" parent="Power Generator Container"]
visible = false
material = SubResource("ShaderMaterial_815rs")
offset_left = -150.0
offset_top = -150.0
offset_right = 150.0
offset_bottom = 150.0

[node name="Power Generator Sprites" type="Sprite2D" parent="Power Generator Container"]
texture = ExtResource("9_0hw32")
hframes = 3
vframes = 2
frame = 5

[node name="Power Generator AnimationPlayer" type="AnimationPlayer" parent="Power Generator Container"]
libraries = {
"": SubResource("AnimationLibrary_o1oaj")
}

[node name="CanvasModulate" type="CanvasModulate" parent="."]
visible = false
color = Color(0.151276, 0.151276, 0.151276, 1)

[connection signal="pressed" from="Power Generator Container/GeneratorTextureButton" to="." method="_on_texture_button_pressed"]

[editable path="House"]
[editable path="Mannequin"]
